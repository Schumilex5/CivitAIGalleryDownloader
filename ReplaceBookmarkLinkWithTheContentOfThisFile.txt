javascript:(async()=>{const box=document.createElement("div");Object.assign(box.style,{position:"fixed",bottom:"45px",right:"20px",zIndex:"999999",background:"rgba(0,0,0,0.8)",color:"#0f0",fontSize:"13px",fontFamily:"monospace",padding:"10px 14px",borderRadius:"10px",boxShadow:"0 0 10px rgba(0,0,0,0.5)",whiteSpace:"pre-line"});document.body.appendChild(box);const restartBtn=document.createElement("button");restartBtn.textContent="Restart";Object.assign(restartBtn.style,{display:"block",marginTop:"8px",fontSize:"12px",cursor:"pointer"});box.appendChild(restartBtn);const log=(m,c="#0f0")=>{box.style.color=c;box.textContent=m;box.appendChild(restartBtn)};const sleep=ms=>new Promise(r=>setTimeout(r,ms));const clean=u=>u.replace(/\/anim=.*?\/|,optimized=true|,width=\d+/g,"/").split("?")[0];async function downloadImages(){log("üü¢ Starting image downloader‚Ä¶");const g=document.querySelector('[class*=\"ModelVersionDetails_mainSection__\"]');if(!g)return log("‚ùå Gallery not found","#f55");const next=g.querySelector(\"button svg.tabler-icon-chevron-right\")?.closest(\"button\");if(next){log(\"‚û°Ô∏è Auto-scrolling gallery‚Ä¶\");let p=0,s=0;for(let i=0;i<300;i++){const imgs=g.querySelectorAll('img[src*=\"image.civitai.com\"]');if(imgs.length>p){p=imgs.length;s=0;log(`‚û°Ô∏è Loaded ${imgs.length} images‚Ä¶`)}else if(++s>5)break;next.click();await sleep(50)}}else log(\"‚ÑπÔ∏è No next button found ‚Äî static gallery\");log(\"üì∏ Collecting images‚Ä¶\");const seen=new Set();const urls=[...g.querySelectorAll('img[src*=\"image.civitai.com\"]')].map(i=>clean(i.src)).filter(u=>u&&u.startsWith(\"https\")&&!seen.has(u)&&seen.add(u));log(`üì• Fetching ${urls.length} images‚Ä¶`);for(let i=0;i<urls.length;i++){try{const r=await fetch(urls[i]);const b=await r.blob();let e=\"jpg\";if(b.type.includes(\"gif\"))e=\"gif\";else if(b.type.includes(\"png\"))e=\"png\";else if(b.type.includes(\"webp\"))e=\"webp\";const a=document.createElement(\"a\");a.href=URL.createObjectURL(b);a.download=`civitai_image_${i+1}.${e}`;document.body.appendChild(a);a.click();a.remove();URL.revokeObjectURL(a.href);log(`‚úÖ ${i+1}/${urls.length} images saved`)}catch(e){log(`‚ùå Failed ${i+1}`,\"#f55\")}await sleep(80)}log(\"üü¢ Images done! Starting videos‚Ä¶\");await sleep(500)}async function downloadVideos(){log(\"üü¢ Starting video downloader‚Ä¶\");const root=document.querySelector('[class*=\"ModelVersionDetails_mainSection__\"]')||document;const seen=new Set();const vids=[...root.querySelectorAll('video source[type=\"video/mp4\"]')].map(s=>s.src?.split(\"?\")[0]).filter(u=>u&&u.startsWith(\"https\")&&!seen.has(u)&&seen.add(u));if(!vids.length){log(\"‚ö†Ô∏è No MP4 sources found on page\",\"#f55\");setTimeout(()=>box.remove(),2500);return;}log(`üì• Found ${vids.length} MP4 files, downloading‚Ä¶`);for(let i=0;i<vids.length;i++){const u=vids[i];try{const r=await fetch(u);const b=await r.blob();const a=document.createElement(\"a\");a.href=URL.createObjectURL(b);a.download=`civitai_video_${i+1}.mp4`;document.body.appendChild(a);a.click();a.remove();URL.revokeObjectURL(a.href);log(`üéûÔ∏è Saved ${i+1}/${vids.length}`)}catch(e){log(`‚ùå Failed ${i+1}: ${e}`,\"#f55\")}await sleep(150)}log(\"üü¢ All done!\");setTimeout(()=>box.remove(),5000)}async function runAll(){await downloadImages();await downloadVideos()}restartBtn.onclick=runAll;await runAll();})();
